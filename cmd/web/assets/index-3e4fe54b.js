import{d as R,i as U,au as j,at as B,r as o,x as v,c as F,k as f,Z as K,n as L,l as V,m as a,_ as i,$,j as e,W as b,F as C,av as q}from"./utils-7a539270.js";import{_ as P}from"./NavBack.vue_vue_type_script_setup_true_lang-a80a61f1.js";import{_ as A}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-77b9c177.js";import{_ as D}from"./UiParentCard.vue_vue_type_script_setup_true_lang-f6f68ebc.js";import{_ as S}from"./AiAudio.vue_vue_type_style_index_0_lang-0cb907a9.js";import{V as g}from"./VRow-220780f3.js";import{V as u}from"./VCol-b16873ba.js";import{V as T}from"./VForm-3af80d80.js";import{a4 as c,a5 as y,V as E}from"./index-de28ea06.js";import{V as I}from"./VFileInput-185dd17d.js";const O={class:"d-flex flex-column flex-sm-row gap-3 justify-center"},W={class:"d-flex flex-column"},te=R({__name:"index",setup(Z){const h=U("provideAspectPage"),p=j(),x=B(),_=o({title:"声纹注册"}),w=o([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹注册",disabled:!0,href:"#"}]),m=o(),d=o(!1),t=v({file:[],userName:"",userKey:""}),n=v({file:[l=>l&&l.length!==0||"请上传音频文件"],userName:[l=>!!l||"请输入用户姓名"],userKey:[l=>!!l||"请输入用户标识"]}),k=F(()=>t.file&&t.file.length>0?URL.createObjectURL(t.file[0]):""),N=async()=>{const{valid:l}=await m.value.validate();if(l){d.value=!0;const[s,r]=await q.upload({url:"/voice/register",showSuccess:"注册成功",data:t});r&&(p.path!=="/voice-print/library-list/register"?m.value.reset():(h.methods.refreshListPage(),x.replace("/voice-print/library-list/list"))),d.value=!1}};return(l,s)=>(f(),K(C,null,[L(p).path==="/voice-print/library-list/register"?(f(),V(P,{key:0,backUrl:"/voice-print/library-list/list"},{default:a(()=>[i($(_.value.title),1)]),_:1})):(f(),V(A,{key:1,title:_.value.title,breadcrumbs:w.value},null,8,["title","breadcrumbs"])),e(D,{title:"注册"},{default:a(()=>[e(g,{justify:"center"},{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(T,{ref_key:"formRef",ref:m},{default:a(()=>[e(g,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[b("div",O,[e(S,{src:k.value},null,8,["src"])]),e(c,{class:"mb-2 font-weight-medium"},{default:a(()=>[i("音频文件")]),_:1}),e(I,{modelValue:t.file,"onUpdate:modelValue":s[0]||(s[0]=r=>t.file=r),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a","prepend-icon":"mdi-volume-high",rules:n.file,"hide-details":"auto",variant:"outlined",required:"",multiple:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(c,{class:"mb-2 font-weight-medium"},{default:a(()=>[i("用户姓名")]),_:1}),e(y,{modelValue:t.userName,"onUpdate:modelValue":s[1]||(s[1]=r=>t.userName=r),"hide-details":"auto",rules:n.userName,required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(c,{class:"mb-2 font-weight-medium"},{default:a(()=>[i("用户标识")]),_:1}),e(y,{modelValue:t.userKey,"onUpdate:modelValue":s[2]||(s[2]=r=>t.userKey=r),"hide-details":"auto",rules:n.userKey,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),b("div",W,[e(E,{loading:d.value,color:"primary",class:"mt-4",block:"",onClick:N},{default:a(()=>[i(" 提交 ")]),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1})]),_:1})],64))}});export{te as default};
