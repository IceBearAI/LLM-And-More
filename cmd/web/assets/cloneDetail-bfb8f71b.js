import{_ as se}from"./NavBack.vue_vue_type_script_setup_true_lang-8415f227.js";import{d as B,ac as ne,k as S,l as j,m as e,j as t,_ as d,$ as g,n as w,aB as W,al as M,am as L,W as l,x as $,r as y,c as K,w as re,U as V,Y as X,av as R,au as Q,o as A,Z as H,F as O}from"./utils-7cd8a09b.js";import{_ as Z}from"./UiParentCard.vue_vue_type_script_setup_true_lang-d71eddbc.js";import{ae as D,_ as G,V as ee}from"./index-2a19813c.js";import{V as x}from"./VCol-3d7d5d87.js";import{V as E}from"./VRow-6e3b9bcc.js";import{_ as N}from"./AiAudio.vue_vue_type_style_index_0_lang-994433fb.js";import{V as te}from"./VFileInput-72879065.js";import{V as de}from"./VTextarea-4601df95.js";import{V as ae}from"./VForm-a8874399.js";import{_ as oe}from"./ConfirmByClick.vue_vue_type_style_index_0_lang-03d03528.js";import{_ as ie}from"./Explain.vue_vue_type_style_index_0_lang-ac56cfd0.js";import{V as ce,a as z,b as ue,c as J}from"./VWindowItem-994a0648.js";import"./Confirm-f7c8f790.js";import"./IconInfoCircle-ea955826.js";const F=c=>(M("data-v-a5887032"),c=c(),L(),c),pe=F(()=>l("label",null,"供应",-1)),_e=F(()=>l("label",null,"语言",-1)),fe=F(()=>l("label",null,"音色",-1)),me=F(()=>l("label",null,"适应范围",-1)),he=F(()=>l("label",null,"年龄段",-1)),be=F(()=>l("label",null,"性别",-1)),ve=F(()=>l("label",null,"备注",-1)),Ie=F(()=>l("label",null,"创建时间",-1)),ge=B({__name:"CloneDetailBaseInfo",props:{info:{default:()=>({})}},setup(c){const{loadDictTree:k,getLabels:_}=ne();k(["speak_provider","speak_lang","speak_age_group","speak_gender","speak_area"]);const o=c;return(m,f)=>(S(),j(E,{class:"my-form waterfall"},{default:e(()=>[t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[pe]),default:e(()=>[d(" "+g(w(_)([["speak_provider",o.info.provider]])),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[_e]),default:e(()=>[d(" "+g(w(_)([["speak_lang",o.info.lang]])),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[fe]),default:e(()=>[d(" "+g(w(_)([["speak_age_group",o.info.ageGroup],["speak_gender",o.info.gender]],a=>a.length?a.join("")+"声":"未知")),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[me]),default:e(()=>[d(" "+g(w(_)([["speak_area",o.info.area]])),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[he]),default:e(()=>[d(" "+g(w(_)([["speak_age_group",o.info.ageGroup]])),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[be]),default:e(()=>[d(" "+g(w(_)([["speak_gender",o.info.gender]])),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[ve]),default:e(()=>[d(" "+g(o.info.remark),1)]),_:1})]),_:1}),t(x,{xs:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(D,{"hide-details":""},{prepend:e(()=>[Ie]),default:e(()=>[d(" "+g(w(W).dateFormat(o.info.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1})]),_:1})]),_:1}))}});const ye=G(ge,[["__scopeId","data-v-a5887032"]]),U=c=>(M("data-v-d463e957"),c=c(),L(),c),xe={class:"mx-auto mt-3",style:{width:"540px"}},Ve=U(()=>l("label",{class:"required"},"项目ID",-1)),ke=U(()=>l("label",{class:"required"},"授权音频",-1)),we=U(()=>l("a",{class:"link",href:"http://docs.paas.creditease.corp/paas-gpt/voice/voice_personal.html",target:"_blank"},"授权音频要求",-1)),De=U(()=>l("label",null,null,-1)),$e=U(()=>l("label",null,"备注",-1)),Ce=B({__name:"CreateConsentVoicePane",props:{speakName:{default:""}},emits:["submit"],setup(c,{expose:k,emit:_}){const o=c,m=_,f=$({operateType:"add"}),a=$({speakName:o.speakName,file:[],projectId:"",description:""}),r=y(""),b=y(),C=y(),P=$({file:[s=>s.length>0||"请上传授权音频"],projectId:[s=>!!s||"请选择项目ID"]}),T=K(()=>a.file&&a.file.length>0?URL.createObjectURL(a.file[0]):""),v=async({valid:s,showLoading:u})=>{if(s){const[n,p]=await R.upload({timeout:6e3,showLoading:u,showSuccess:!0,url:"/personal/consent",data:a});p&&(b.value.hide(),m("submit"))}};return re(()=>a.projectId,(s,u)=>{u||(r.value=s)}),k({show({title:s,operateType:u}){b.value.show({title:s,refForm:C}),f.operateType=u,f.operateType==="add"&&(a.file=[],a.projectId=r.value,a.description="")}}),(s,u)=>{const n=V("Select"),p=V("Pane");return S(),j(p,{ref_key:"refPane",ref:b,onSubmit:v},{default:e(()=>[l("div",xe,[t(ae,{ref_key:"refForm",ref:C,class:"my-form"},{default:e(()=>[t(n,{placeholder:"请选择项目ID",rules:P.projectId,mapDictionary:{code:"voice_personal_project"},modelValue:a.projectId,"onUpdate:modelValue":u[0]||(u[0]=i=>a.projectId=i),defaultFirst:"",clearable:!1},{prepend:e(()=>[Ve]),_:1},8,["rules","modelValue"]),t(te,{modelValue:a.file,"onUpdate:modelValue":u[1]||(u[1]=i=>a.file=i),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a","prepend-icon":null,"hide-details":"auto",variant:"outlined",rules:P.file},{prepend:e(()=>[ke]),append:e(()=>[we]),_:1},8,["modelValue","rules"]),T.value?(S(),j(D,{key:0,"hide-details":"auto"},{prepend:e(()=>[De]),default:e(()=>[t(N,{src:T.value},null,8,["src"])]),_:1})):X("",!0),t(de,{modelValue:a.description,"onUpdate:modelValue":u[2]||(u[2]=i=>a.description=i),modelModifiers:{trim:!0},placeholder:"请输入备注"},{prepend:e(()=>[$e]),_:1},8,["modelValue"])]),_:1},512)])]),_:1},512)}}});const Pe=G(Ce,[["__scopeId","data-v-d463e957"]]),Te=l("span",{class:"font-weight-bold"},"这是进行一项操作时必须了解的重要信息",-1),Se=l("br",null,null,-1),Fe={class:"text-primary"},Re=l("br",null,null,-1),Be=B({__name:"ConsentVoice",setup(c){const k=Q(),{speakName:_}=k.query,o=$({list:[],total:0}),m=y(),f=y(),a=y(),r=$({consentId:""}),b=n=>{let p=[];return p.push({text:"删除",color:"error",click(){C(n)}}),p},C=n=>{r.consentId=n.consentId,a.value.show({width:"450px"})},P=async(n={})=>{const[p,i]=await R.delete({...n,showSuccess:!0,url:`/personal/consent/${r.consentId}`});i&&(a.value.hide(),s())},T=async(n={})=>{const[p,i]=await R.get({url:"/personal/consent",showLoading:f.value.el,data:{speakName:_,...n}});i?(o.list=i.list||[],o.total=i.total):(o.list=[],o.total=0)},v=()=>{f.value.query({page:1})},s=()=>{f.value.query()},u=()=>{m.value.show({title:"上传授权音频",operateType:"add"})};return A(()=>{s()}),(n,p)=>{const i=V("ButtonsInForm"),I=V("el-table-column"),Y=V("ButtonsInTable"),q=V("TableWithPager");return S(),H(O,null,[t(E,null,{default:e(()=>[t(x,{class:"d-flex justify-end",cols:"12"},{default:e(()=>[t(i,null,{default:e(()=>[t(ee,{color:"primary",onClick:u},{default:e(()=>[d("上传授权音频")]),_:1})]),_:1})]),_:1}),t(x,{cols:"12"},{default:e(()=>[t(q,{onQuery:T,ref_key:"tableWithPagerRef",ref:f,infos:o},{default:e(()=>[t(I,{label:"项目ID",prop:"projectId","min-width":"200px","show-overflow-tooltip":""}),t(I,{label:"授权同意ID",prop:"consentId","min-width":"260px"}),t(I,{label:"授权音频","min-width":"330px"},{default:e(({row:h})=>[t(N,{src:h==null?void 0:h.audiodataUrl},null,8,["src"])]),_:1}),t(I,{label:"备注",prop:"description","min-width":"200px"}),t(I,{label:"创建时间","min-width":"165px"},{default:e(({row:h})=>[d(g(w(W).dateFormat(h.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),t(I,{label:"操作",width:"80px",fixed:"right"},{default:e(({row:h})=>[t(Y,{buttons:b(h),onlyOne:""},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1}),t(oe,{ref_key:"refConfirmDelete",ref:a,onSubmit:P},{text:e(()=>[Te,Se,d(" 您将要删除 "),l("span",Fe,g(r.consentId),1),Re,d(" 确定要继续吗？ ")]),_:1},512),t(Pe,{ref_key:"createConsentVoiceRef",ref:m,"speak-name":w(_),onSubmit:v},null,8,["speak-name"])],64)}}}),le=c=>(M("data-v-03421a9e"),c=c(),L(),c),je={class:"mx-auto mt-3",style:{width:"540px"}},Ue={class:"required"},Ne=le(()=>l("label",{class:"required"},"参考音频",-1)),Ye=le(()=>l("label",null,null,-1)),qe=B({__name:"CreateReferenceVoicePane",props:{speakName:{default:""}},emits:["submit"],setup(c,{expose:k,emit:_}){const o=c,m=_,f=$({operateType:"add"}),a=$({file:[],consentId:null}),r=y(),b=y(),C=$({file:[v=>v.length>0||"请上传参考音频"],consentId:[v=>!!v||"请选择授权ID"]}),P=K(()=>a.file&&a.file.length>0?URL.createObjectURL(a.file[0]):""),T=async({valid:v,showLoading:s})=>{if(v){const[u,n]=await R.upload({timeout:6e5,showLoading:s,showSuccess:!0,url:"/api/personal/voice",data:a});n&&(r.value.hide(),m("submit"))}};return k({show({title:v,operateType:s}){r.value.show({title:v,refForm:b}),f.operateType=s,f.operateType==="add"&&(a.file=[],a.consentId=null)}}),(v,s)=>{const u=V("Select"),n=V("Pane");return S(),j(n,{ref_key:"refPane",ref:r,onSubmit:T},{default:e(()=>[l("div",je,[t(ae,{ref_key:"refForm",ref:b,class:"my-form"},{default:e(()=>[t(u,{placeholder:"请选择授权ID",rules:C.consentId,mapAPI:{url:"/personal/consent",data:{speakName:o.speakName},labelField:"consentId",valueField:"consentId"},modelValue:a.consentId,"onUpdate:modelValue":s[0]||(s[0]=p=>a.consentId=p)},{prepend:e(()=>[l("label",Ue,[d("授权ID "),t(ie,null,{default:e(()=>[d("如果授权ID选项为空，请先去上传授权语音")]),_:1})])]),_:1},8,["rules","mapAPI","modelValue"]),t(te,{modelValue:a.file,"onUpdate:modelValue":s[1]||(s[1]=p=>a.file=p),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a","prepend-icon":null,"hide-details":"auto",variant:"outlined",rules:C.file},{prepend:e(()=>[Ne]),_:1},8,["modelValue","rules"]),P.value?(S(),j(D,{key:0,"hide-details":"auto"},{prepend:e(()=>[Ye]),default:e(()=>[t(N,{src:P.value},null,8,["src"])]),_:1})):X("",!0)]),_:1},512)])]),_:1},512)}}});const We=G(qe,[["__scopeId","data-v-03421a9e"]]),Me=l("span",{class:"font-weight-bold"},"这是进行一项操作时必须了解的重要信息",-1),Le=l("br",null,null,-1),Qe={class:"text-primary"},Ae=l("br",null,null,-1),He=B({__name:"ReferenceVoice",setup(c){const k=Q(),{speakName:_}=k.query,o=$({list:[],total:0}),m=y(),f=y(),a=y(),r=$({voiceId:""}),b=n=>{let p=[];return p.push({text:"删除",color:"error",click(){C(n)}}),p},C=n=>{r.voiceId=n.voiceId,a.value.show({width:"450px"})},P=async(n={})=>{const[p,i]=await R.delete({...n,showSuccess:!0,url:`/personal/voice/${r.voiceId}`});i&&(a.value.hide(),s())},T=async(n={})=>{const[p,i]=await R.get({url:"/personal/voice",showLoading:f.value.el,data:{speakName:_,...n}});i?(o.list=i.list||[],o.total=i.total):(o.list=[],o.total=0)},v=()=>{f.value.query({page:1})},s=()=>{f.value.query()},u=()=>{m.value.show({title:"上传参考音频",operateType:"add"})};return A(()=>{s()}),(n,p)=>{const i=V("ButtonsInForm"),I=V("el-table-column"),Y=V("ButtonsInTable"),q=V("TableWithPager");return S(),H(O,null,[t(E,null,{default:e(()=>[t(x,{class:"d-flex justify-end",cols:"12"},{default:e(()=>[t(i,null,{default:e(()=>[t(ee,{color:"primary",onClick:u},{default:e(()=>[d("上传参考音频")]),_:1})]),_:1})]),_:1}),t(x,{cols:"12"},{default:e(()=>[t(q,{onQuery:T,ref_key:"tableWithPagerRef",ref:f,infos:o},{default:e(()=>[t(I,{label:"项目ID",prop:"projectId","min-width":"200px"}),t(I,{label:"授权同意ID",prop:"consentId","min-width":"200px"}),t(I,{label:"参考音频ID",prop:"voiceId","min-width":"200px"}),t(I,{label:"参考音频","min-width":"330px"},{default:e(({row:h})=>[t(N,{src:h==null?void 0:h.audiodataUrl},null,8,["src"])]),_:1}),t(I,{label:"TTS参考标识",prop:"speakerProfileId","min-width":"150px","show-overflow-tooltip":""}),t(I,{label:"创建时间","min-width":"165px"},{default:e(({row:h})=>[d(g(w(W).dateFormat(h.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),t(I,{label:"操作",width:"80px",fixed:"right"},{default:e(({row:h})=>[t(Y,{buttons:b(h),onlyOne:""},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1}),t(oe,{ref_key:"refConfirmDelete",ref:a,onSubmit:P},{text:e(()=>[Me,Le,d(" 您将要删除 "),l("span",Qe,g(r.voiceId),1),Ae,d(" 确定要继续吗？ ")]),_:1},512),t(We,{ref_key:"CreateReferenceVoiceRef",ref:m,"speak-name":w(_),onSubmit:v},null,8,["speak-name"])],64)}}}),rt=B({__name:"cloneDetail",setup(c){const k=Q(),{speakName:_}=k.query,o=y({}),m=y(""),f=async()=>{let[a,r]=await R.get({showLoading:!0,url:`/voice/speak/${_}`});r&&(o.value=r)};return A(()=>{f()}),(a,r)=>(S(),H(O,null,[t(se,{backUrl:"/voice-print/synthesis/speaker/list"},{default:e(()=>[d("声音克隆（微软个人版）")]),_:1}),t(Z,{class:"mt-4"},{header:e(()=>[d(" 发声人："+g(`${o.value.speakCname}（${o.value.speakName}）`),1)]),default:e(()=>[t(ye,{info:o.value},null,8,["info"])]),_:1}),t(Z,{class:"mt-5"},{header:e(()=>[t(ce,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=b=>m.value=b),"align-tabs":"start",color:"primary"},{default:e(()=>[t(z,{value:1},{default:e(()=>[d("授权语音列表")]),_:1}),t(z,{value:2},{default:e(()=>[d("参考音频列表")]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[t(ue,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=b=>m.value=b)},{default:e(()=>[t(J,{class:"pt-2",value:1},{default:e(()=>[t(Be)]),_:1}),t(J,{class:"pt-2",value:2},{default:e(()=>[t(He)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}});export{rt as default};
