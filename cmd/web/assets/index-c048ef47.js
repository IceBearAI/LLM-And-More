import{d as R,i as U,b8 as j,aE as B,r as o,x as v,c as F,k as f,Z as K,n as L,l as V,m as t,_ as i,$,j as e,W as b,F as C,b9 as q}from"./utils-d360fd38.js";import{_ as P}from"./NavBack.vue_vue_type_script_setup_true_lang-bc31ea81.js";import{_ as A}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5c17211d.js";import{_ as D}from"./UiParentCard.vue_vue_type_script_setup_true_lang-f0de3c2a.js";import{_ as E}from"./AiAudio.vue_vue_type_style_index_0_lang-95f32f55.js";import{V as g}from"./VRow-92b162a6.js";import{V as u}from"./VCol-dc51774a.js";import{V as S}from"./VForm-1f16fcb0.js";import{a3 as c,a4 as y,V as T}from"./index-8b7fa986.js";import{V as I}from"./VFileInput-eedcba5c.js";const O={class:"d-flex flex-column flex-sm-row gap-3 justify-center"},W={class:"d-flex flex-column"},ae=R({__name:"index",setup(Z){const h=U("provideAspectPage"),p=j(),x=B(),_=o({title:"声纹注册"}),w=o([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹注册",disabled:!0,href:"#"}]),m=o(),d=o(!1),a=v({file:[],userName:"",userKey:""}),n=v({file:[l=>l&&l.length!==0||"请上传音频文件"],userName:[l=>!!l||"请输入用户姓名"],userKey:[l=>!!l||"请输入用户标识"]}),k=F(()=>a.file&&a.file.length>0?URL.createObjectURL(a.file[0]):""),N=async()=>{const{valid:l}=await m.value.validate();if(l){d.value=!0;const[s,r]=await q.upload({url:"/voice/register",showSuccess:"注册成功",data:a});r&&(p.path!=="/voice-print/library-list/register"?m.value.reset():(h.methods.refreshListPage(),x.replace("/voice-print/library-list/list"))),d.value=!1}};return(l,s)=>(f(),K(C,null,[L(p).path==="/voice-print/library-list/register"?(f(),V(P,{key:0,backUrl:"/voice-print/library-list/list"},{default:t(()=>[i($(_.value.title),1)]),_:1})):(f(),V(A,{key:1,title:_.value.title,breadcrumbs:w.value},null,8,["title","breadcrumbs"])),e(D,{title:"注册"},{default:t(()=>[e(g,{justify:"center"},{default:t(()=>[e(u,{cols:"12",md:"6"},{default:t(()=>[e(S,{ref_key:"formRef",ref:m},{default:t(()=>[e(g,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[b("div",O,[e(E,{src:k.value},null,8,["src"])]),e(c,{class:"mb-2 font-weight-medium"},{default:t(()=>[i("音频文件")]),_:1}),e(I,{modelValue:a.file,"onUpdate:modelValue":s[0]||(s[0]=r=>a.file=r),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a","prepend-icon":"mdi-volume-high",rules:n.file,"hide-details":"auto",variant:"outlined",required:"",multiple:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(c,{class:"mb-2 font-weight-medium"},{default:t(()=>[i("用户姓名")]),_:1}),e(y,{modelValue:a.userName,"onUpdate:modelValue":s[1]||(s[1]=r=>a.userName=r),"hide-details":"auto",rules:n.userName,required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(c,{class:"mb-2 font-weight-medium"},{default:t(()=>[i("用户标识")]),_:1}),e(y,{modelValue:a.userKey,"onUpdate:modelValue":s[2]||(s[2]=r=>a.userKey=r),"hide-details":"auto",rules:n.userKey,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),b("div",W,[e(T,{loading:d.value,color:"primary",class:"mt-4",block:"",onClick:N},{default:t(()=>[i(" 提交 ")]),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1})]),_:1})],64))}});export{ae as default};
