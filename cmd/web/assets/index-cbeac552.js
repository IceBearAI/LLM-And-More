import{i as E,au as I,r as i,x as z,U as D,k as h,Z as M,n as O,l as y,m as l,_ as o,j as e,W as s,$ as C,F as Y,av as W,al as Z,am as q}from"./utils-01c411e4.js";import{_ as G,a0 as w,$ as x,V as N,a1 as R,a2 as H,a3 as d}from"./index-bb5b6a82.js";import{_ as J}from"./NavBack.vue_vue_type_script_setup_true_lang-5c808334.js";import{_ as K}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-51ed0b2c.js";import{_ as V}from"./UiParentCard.vue_vue_type_script_setup_true_lang-76206b3a.js";import{_ as Q}from"./Explain.vue_vue_type_style_index_0_lang-c016eb46.js";import{V as c}from"./VCol-a8d2bf92.js";import{V as U}from"./VFileInput-e0a13545.js";import{V as k}from"./VRow-970d1eb0.js";import{V as A}from"./VRating-5718d487.js";import"./IconInfoCircle-18798ea0.js";const n=p=>(Z("data-v-2bd0f3dd"),p=p(),q(),p),X=n(()=>s("div",{class:"d-flex flex-column flex-sm-row gap-3 justify-center"},[s("audio",{id:"audio1",controls:""},"Your browser does not support the audio element.")],-1)),ee={class:"d-flex flex-column flex-sm-row gap-3 justify-center",style:{"margin-top":"20px"}},le=n(()=>s("div",{class:"d-flex flex-column flex-sm-row gap-3 justify-center"},[s("audio",{id:"audio2",controls:""},"Your browser does not support the audio element.")],-1)),ae={class:"d-flex flex-column flex-sm-row gap-3 justify-center",style:{"margin-top":"20px"}},te=n(()=>s("br",null,null,-1)),oe=n(()=>s("br",null,null,-1)),se=n(()=>s("br",null,null,-1)),ie=n(()=>s("br",null,null,-1)),de=n(()=>s("br",null,null,-1)),ne=n(()=>s("br",null,null,-1)),ue=n(()=>s("br",null,null,-1)),re=n(()=>s("br",null,null,-1)),ce={__name:"index",setup(p){const P=E("provideAspectPage"),j=I(),g=i(),b=i(!1),_=i(!1),f=i(0);i(""),i("");const m=i(!1),$=i({title:"声纹识别"}),v=z({data:{}}),L=i(),S=i([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹识别",disabled:!0,href:"#"}]);function F(u){const a=d("#file1")[0].files[0],r=URL.createObjectURL(a),t=d("#audio1")[0];t.src=r,d("#file1")[0].files[0]&&d("#file2")[0].files[0]?m.value=!0:m.value=!1}function T(u){const a=d("#file2")[0].files[0],r=URL.createObjectURL(a),t=d("#audio2")[0];t.src=r,d("#file1")[0].files[0]&&d("#file2")[0].files[0]?m.value=!0:m.value=!1}async function B(){if(console.log("---voiceAnalysis---"),_.value)return;let u=d("#file1")[0].files[0],a=d("#file2")[0].files[0];if(!u||!a)return;console.log(u),_.value=!0;const[r,t]=await W.upload({url:"/voice/compare",data:{file1:u,file2:a,modelType:g.value,threshold:.8}});_.value=!1,t&&(v.data=t.data,f.value=v.data.dist*10,P.methods.refreshListPage())}return(u,a)=>{const r=D("Select");return h(),M(Y,null,[O(j).path==="/voice-print/compare-list/compare"?(h(),y(J,{key:0,backUrl:"/voice-print/compare-list/list"},{default:l(()=>[o(" 声纹比对 ")]),_:1})):(h(),y(K,{key:1,title:$.value.title,breadcrumbs:S.value},null,8,["title","breadcrumbs"])),e(k,null,{default:l(()=>[e(c,{cols:"12",md:"6"},{default:l(()=>[e(V,{title:"第一段声音"},{default:l(()=>[X,s("div",ee,[e(U,{id:"file1",ref:"file1",accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"选择第一段音频",onChange:F,"prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,512)])]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:l(()=>[e(V,{title:"第二段声音"},{default:l(()=>[le,s("div",ae,[e(U,{id:"file2",ref:"file2",accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"选择第二段音频",onChange:T,"prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,512)])]),_:1})]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{elevation:"10"},{default:l(()=>[e(x,null,{default:l(()=>[e(k,null,{default:l(()=>[e(c,{cols:"12",sm:"6"},{default:l(()=>[e(r,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),mapDictionary:{code:"vrp_model_type"},placeholder:"请选择模型","hide-details":"",defaultFirst:"",clearable:!1},{prepend:l(()=>[e(Q,null,{default:l(()=>[o(" CAMPPlus 训练CN-Celeb数据集"),te,o(" CAMPPlus-big 训练更大数据集"),oe,o(" CAMPPlus-bbig 训练其他超大数据集"),se,o(" ERes2Net 训练CN-Celeb数据集"),ie,o(" ERes2Net-big 训练其他超大数据集"),de,o(" EcapaTdnn训练CN-Celeb数据集"),ne,o(" Res2Net训练CN-Celeb数据集"),ue,o(" ResNetSE训练CN-Celeb数据集"),re,o(" TDNN训练CN-Celeb数据集 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:l(()=>[e(N,{loading:_.value,disabled:!m.value,color:"secondary",width:"200",height:"40",onClick:B},{default:l(()=>[o(" 开始分析 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(V,{title:"分析结果",ref_key:"resultRef",ref:L},{default:l(()=>[e(R,{class:"flex-column"},{default:l(()=>[e(x,{style:{"font-size":"20px"}},{default:l(()=>[o(C(v.data.message),1)]),_:1}),e(A,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=t=>f.value=t),length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["modelValue"])]),_:1})]),_:1},512)]),_:1})]),_:1}),e(H,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=t=>b.value=t),"max-width":"800",title:"分析结果"},{default:l(()=>[e(w,null,{default:l(()=>[e(R,{class:"flex-column"},{default:l(()=>[e(x,{style:{"font-size":"20px"}},{default:l(()=>[o(C(v.data.message),1)]),_:1}),e(A,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=t=>f.value=t),length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["modelValue"]),e(N,{color:"secondary",class:"px-4 mx-auto",onClick:a[3]||(a[3]=t=>b.value=!1),variant:"tonal",width:"200",height:"48",style:{"margin-top":"20px"}},{default:l(()=>[o("关闭")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ce=G(ce,[["__scopeId","data-v-2bd0f3dd"]]);export{Ce as default};
