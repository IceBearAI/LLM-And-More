import{d as j,au as C,at as L,i as S,r as s,x as g,c as $,U as B,k as d,Z as p,j as e,m as l,_ as o,$ as F,W as _,F as q,av as D}from"./utils-09b5cec9.js";import{_ as N}from"./NavBack.vue_vue_type_script_setup_true_lang-4ac41514.js";import{_ as x}from"./UiParentCard.vue_vue_type_script_setup_true_lang-9cca07b1.js";import{_ as h}from"./AiAudio.vue_vue_type_style_index_0_lang-510525ac.js";import{_ as P}from"./Explain.vue_vue_type_style_index_0_lang-e565f21f.js";import{V as r}from"./VCol-150917fd.js";import{V as n}from"./VRow-310bbcce.js";import{V as A}from"./VForm-4ebdd875.js";import{a4 as R,V as K}from"./index-d40e0dc1.js";import{V as E}from"./VFileInput-07424fc3.js";import"./IconInfoCircle-bf794c1c.js";const I={class:"d-flex flex-column flex-sm-row gap-3 justify-center"},O=_("br",null,null,-1),T={class:"d-flex flex-column"},W={key:0,class:"d-flex flex-column flex-sm-row gap-3 justify-center"},Z={key:1,class:"flex-fill text-center"},se=j({__name:"denoise",setup(z){C(),L();const y=S("provideAspectPage"),b=s({title:"创建降噪"});s(!1);const v=s(),w=s(),c=s(!1),a=g({file:[],sampleRate:16}),V=g({file:[t=>t&&t.length!==0||"请上传音频文件"],sampleRate:[t=>!!(t||t===0)||"请选择采样率"]}),k=$(()=>a.file&&a.file.length>0?URL.createObjectURL(a.file[0]):""),m=s(),U=async()=>{const{valid:t}=await v.value.validate();if(t){c.value=!0;const[i,u]=await D.upload({url:"/voice/denoise",showSuccess:"处理成功",data:a});c.value=!1,u&&(m.value=u.s3Url,y.methods.refreshListPage())}};return(t,i)=>{const u=B("Select");return d(),p(q,null,[e(N,{backUrl:"/voice-print/denoise-list/list"},{default:l(()=>[o(F(b.value.title),1)]),_:1}),e(n,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[e(x,{title:"降噪"},{default:l(()=>[e(n,{justify:"center"},{default:l(()=>[e(r,{cols:"12",md:"6"},{default:l(()=>[e(A,{ref_key:"formRef",ref:v,class:"my-form"},{default:l(()=>[e(n,null,{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[_("div",I,[e(h,{src:k.value},null,8,["src"])]),e(R,{class:"mb-2 font-weight-medium required"},{default:l(()=>[o("音频文件")]),_:1}),e(E,{modelValue:a.file,"onUpdate:modelValue":i[0]||(i[0]=f=>a.file=f),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a","prepend-icon":"mdi-volume-high",rules:V.file,"hide-details":"auto",variant:"outlined",required:"",multiple:""},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(R,{class:"mb-2 font-weight-medium required"},{default:l(()=>[o("采样率 "),e(P,{class:"ml-1"},{default:l(()=>[o("16K 推荐使用，降噪模型默认使用16K采样率"),O,o(" 原始采样率 降噪时，保持跟原始音频同样的采样率")]),_:1})]),_:1}),e(u,{modelValue:a.sampleRate,"onUpdate:modelValue":i[1]||(i[1]=f=>a.sampleRate=f),mapDictionary:{code:"denoise_sample_rate"},placeholder:"请选择采样率",rules:V.sampleRate,clearable:!1},null,8,["modelValue","rules"])]),_:1})]),_:1}),_("div",T,[e(K,{loading:c.value,color:"primary",class:"mt-4",block:"",onClick:U},{default:l(()=>[o(" 提交 ")]),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{cols:"12"},{default:l(()=>[e(x,{title:"处理结果"},{default:l(()=>[e(n,{class:"text-body-1 pa-5",ref:w.value},{default:l(()=>[e(r,{cols:"12"},{default:l(()=>[m.value?(d(),p("div",W,[e(h,{src:m.value},null,8,["src"])])):(d(),p("p",Z,"暂无结果"))]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})],64)}}});export{se as default};
