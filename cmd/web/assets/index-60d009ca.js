import{d as B,b8 as C,r as i,c as $,k as s,Z as _,n as j,l as n,m as e,_ as r,$ as d,j as a,F as p,W as v,b9 as R}from"./utils-d360fd38.js";import{_ as U}from"./NavBack.vue_vue_type_script_setup_true_lang-bc31ea81.js";import{_ as F}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5c17211d.js";import{_ as V}from"./UiParentCard.vue_vue_type_script_setup_true_lang-f0de3c2a.js";import{_ as L}from"./AiAudio.vue_vue_type_style_index_0_lang-95f32f55.js";import{V as l}from"./VCol-dc51774a.js";import{V as c}from"./VRow-92b162a6.js";import{V as N}from"./VFileInput-eedcba5c.js";import{$ as S,Z as T,V as Z,a3 as b}from"./index-8b7fa986.js";import{V as z}from"./VRating-b07a8765.js";const M=B({__name:"index",setup(D){const g=C(),y=i({title:"声纹查询"}),h=i([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹查询",disabled:!0,href:"#"}]),f=i(!1),u=i([]),t=i(null),m=$(()=>u.value&&u.value.length>0?URL.createObjectURL(u.value[0]):""),x=async()=>{if(!m)return;f.value=!0;const[k,o]=await R.upload({url:"/voice/search",data:{file:u.value}});o&&(t.value=o.data),f.value=!1};return(k,o)=>(s(),_(p,null,[j(g).path==="/voice-print/library-list/search"?(s(),n(U,{key:0,backUrl:"/voice-print/library-list/list"},{default:e(()=>[r(d(y.value.title),1)]),_:1})):(s(),n(F,{key:1,title:y.value.title,breadcrumbs:h.value},null,8,["title","breadcrumbs"])),a(c,null,{default:e(()=>[a(l,{cols:"12"},{default:e(()=>[a(V,{title:"上传音频"},{default:e(()=>[a(c,{class:"justify-center"},{default:e(()=>[a(l,{cols:"12",class:"text-center"},{default:e(()=>[a(L,{src:m.value},null,8,["src"])]),_:1}),a(l,{cols:"12",md:"6"},{default:e(()=>[a(N,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=w=>u.value=w),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"请选择音频","prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(l,{cols:"12"},{default:e(()=>[a(S,{elevation:"10"},{default:e(()=>[a(T,{class:"text-center"},{default:e(()=>[a(Z,{loading:f.value,disabled:!m.value,color:"primary",width:"200",onClick:x},{default:e(()=>[r("开始查询")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),a(l,{cols:"12"},{default:e(()=>[a(V,{title:"查询结果"},{default:e(()=>[t.value?(s(),n(c,{key:0,class:"text-body-1 justify-center pa-5"},{default:e(()=>[t.value.isSame?(s(),_(p,{key:0},[a(l,{cols:"12",class:"d-flex align-center"},{default:e(()=>[a(b,{class:"font-weight-medium"},{default:e(()=>[r("用户姓名：")]),_:1}),v("span",null,d(t.value.userName),1)]),_:1}),a(l,{cols:"12",class:"d-flex align-center"},{default:e(()=>[a(b,{class:"font-weight-medium"},{default:e(()=>[r("用户标识：")]),_:1}),v("span",null,d(t.value.userKey),1)]),_:1}),a(l,{cols:"12",class:"d-flex align-center"},{default:e(()=>[a(b,{class:"font-weight-medium"},{default:e(()=>[r("相似度：")]),_:1}),a(z,{"model-value":t.value.dist*10,length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["model-value"]),v("span",null,"("+d(t.value.dist)+")",1)]),_:1})],64)):(s(),_(p,{key:1},[r("未匹配到相似的声纹")],64))]),_:1})):(s(),n(c,{key:1,class:"text-body-1 justify-center pa-5"},{default:e(()=>[r(" 暂无结果 ")]),_:1}))]),_:1})]),_:1})]),_:1})],64))}});export{M as default};
