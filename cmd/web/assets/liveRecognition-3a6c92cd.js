import{d as K,x as C,r as m,U as k,k as v,l as W,m as l,j as e,W as i,$ as _,_ as c,Z as P,Y as z,b9 as Y,am as M,an as H,o as E,S as Z,bf as L,n as B,bh as G,F as $,Q as J,bg as O}from"./utils-d360fd38.js";import{_ as X}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-5c17211d.js";import{_ as U}from"./UiParentCard.vue_vue_type_script_setup_true_lang-f0de3c2a.js";import{C as ee}from"./ChipBoolean-979c0c50.js";import{V as b}from"./VCol-dc51774a.js";import{V as le}from"./VForm-1f16fcb0.js";import{V as te}from"./VFileInput-eedcba5c.js";import{V as ae}from"./VSlider-0a68b6fe.js";import{V as oe}from"./VSwitch-75718bfc.js";import{V as A,ad as F,_ as se,a4 as R,I as ie}from"./index-8b7fa986.js";import{V as N}from"./VRow-92b162a6.js";const V=g=>(M("data-v-1b7836c9"),g=g(),H(),g),ne=V(()=>i("label",{class:"required"},"检测视频",-1)),re={class:"text-center",style:{width:"28px"}},de=V(()=>i("label",{class:"required"},"要求活体动作",-1)),ue=V(()=>i("label",null,"是否返回图片",-1)),ce=V(()=>i("label",null,"是否为活体：",-1)),me=V(()=>i("label",null,"描述：",-1)),pe=V(()=>i("label",null,"返回图片：",-1)),fe=["src"],_e=K({__name:"CreateLivePane",emits:["submit"],setup(g,{expose:T,emit:I}){const f=I,p=C({operateType:"add"}),y=m(),h=m(),a=C({file:[],liveThreshold:1,returnImg:!1}),n=m({}),x=m(!1),S=async()=>{let{valid:r}=await h.value.validate();if(r){x.value=!0;const[s,d]=await Y.upload({url:"/esrgan/face/live",data:a});d&&(n.value=d,f("submit")),x.value=!1}};return T({show({title:r,operateType:s,infos:d}){y.value.show({title:r,width:"1000px",hasSubmitBtn:!1}),p.operateType=s,p.operateType==="add"&&(a.file=[],a.liveThreshold=1,a.returnImg=!1,n.value={})}}),(r,s)=>{const d=k("Pane");return v(),W(d,{ref_key:"refPane",ref:y},{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"6"},{default:l(()=>[e(U,{title:"输入"},{default:l(()=>[e(le,{ref_key:"refForm",ref:h,class:"my-form"},{default:l(()=>[e(te,{modelValue:a.file,"onUpdate:modelValue":s[0]||(s[0]=o=>a.file=o),"prepend-icon":null,accept:"video/*",label:"请上传检测视频","hide-details":"auto",variant:"outlined",rules:[o=>o.length>0||"请上传检测视频"]},{prepend:l(()=>[ne]),_:1},8,["modelValue","rules"]),e(ae,{modelValue:a.liveThreshold,"onUpdate:modelValue":s[1]||(s[1]=o=>a.liveThreshold=o),color:"primary",max:10,min:1,step:1,"hide-details":"auto","thumb-label":""},{append:l(()=>[i("div",re,_(a.liveThreshold),1)]),prepend:l(()=>[de]),_:1},8,["modelValue"]),e(oe,{modelValue:a.returnImg,"onUpdate:modelValue":s[2]||(s[2]=o=>a.returnImg=o),color:"primary","hide-details":"auto"},{prepend:l(()=>[ue]),_:1},8,["modelValue"])]),_:1},512),e(A,{color:"primary",block:"",size:"large",flat:"",loading:x.value,onClick:S},{default:l(()=>[c("开始检测")]),_:1},8,["loading"])]),_:1})]),_:1}),e(b,{cols:"6"},{default:l(()=>[e(U,{title:"输出"},{default:l(()=>[e(F,null,{prepend:l(()=>[ce]),default:l(()=>[c(" "+_(n.value.isLive===void 0?"":n.value.isLive?"是":"否"),1)]),_:1}),e(F,null,{prepend:l(()=>[me]),default:l(()=>[c(" "+_(n.value.desc),1)]),_:1}),e(F,null,{prepend:l(()=>[pe]),default:l(()=>[n.value.imgS3Url?(v(),P("img",{key:0,src:n.value.imgS3Url,width:"200",alt:"返回图片",class:"rounded-md align-end text-right"},null,8,fe)):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)}}});const he=se(_e,[["__scopeId","data-v-1b7836c9"]]),ve=["onClick"],be=["src"],Ve={class:"video-content flex justify-center"},ge=["src"],De=K({__name:"liveRecognition",setup(g){const T=m({title:"活体检测"}),I=m([{text:"人脸服务",disabled:!1,href:"#"},{text:"活体检测",disabled:!0,href:"#"}]),f=C({uuid:"",source:""}),p=C({list:[],total:0}),y=m(),h=m(),a=m(),n=C({url:""}),x=d=>{n.url=d.inputS3Url,a.value.show({showActions:!1})},S=async(d={})=>{const[o,w]=await Y.get({url:"/esrgan/list",showLoading:h.value.el,data:{modelType:"faceLive",...f,...d}});w?(p.list=w.list||[],p.total=w.total):(p.list=[],p.total=0)},r=()=>{h.value.query({page:1})},s=()=>{y.value.show({title:"创建检测",operateType:"add"})};return E(()=>{S()}),(d,o)=>{const w=k("ButtonsInForm"),u=k("el-table-column"),Q=k("TableWithPager"),j=k("Dialog"),q=Z("copy");return v(),P($,null,[e(X,{title:T.value.title,breadcrumbs:I.value},null,8,["title","breadcrumbs"]),e(U,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(R,{modelValue:f.uuid,"onUpdate:modelValue":o[0]||(o[0]=t=>f.uuid=t),label:"请输入uuid","hide-details":"",clearable:"",onKeyup:L(r,["enter"]),"onClick:clear":r},null,8,["modelValue","onKeyup"])]),_:1}),e(b,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(R,{modelValue:f.source,"onUpdate:modelValue":o[1]||(o[1]=t=>f.source=t),label:"请输入来源渠道","hide-details":"",clearable:"",onKeyup:L(r,["enter"]),"onClick:clear":r},null,8,["modelValue","onKeyup"])]),_:1}),e(b,{cols:"12",lg:"3",md:"4",sm:"6"},{default:l(()=>[e(w,null,{default:l(()=>[e(A,{color:"primary",onClick:s},{default:l(()=>[c("创建检测")]),_:1})]),_:1})]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(Q,{onQuery:S,ref_key:"tableWithPagerRef",ref:h,infos:p},{default:l(()=>[e(u,{label:"检测视频","min-width":"150px"},{default:l(({row:t})=>[i("a",{class:"link",href:"javascript: void(0)",onClick:D=>x(t)},[e(B(G),{class:"align-top",size:20})],8,ve)]),_:1}),e(u,{label:"返回图片","min-width":"150px"},{default:l(({row:t})=>[t.outputS3Url?(v(),W(ie,{key:0,size:"80",rounded:"md"},{default:l(()=>[i("img",{src:t.outputS3Url,alt:"返回图片",height:"80"},null,8,be)]),_:2},1024)):(v(),P($,{key:1},[c(" -- ")],64))]),_:1}),e(u,{label:"uuid","min-width":"200px"},{default:l(({row:t})=>[J((v(),P("span",null,[c(_(t.uuid),1)])),[[q,t.uuid]])]),_:1}),e(u,{label:"是否活体","min-width":"120px"},{default:l(({row:t})=>[e(ee,{modelValue:t.isSame,"onUpdate:modelValue":D=>t.isSame=D},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"描述",prop:"remark","min-width":"200px"}),e(u,{label:"py耗时",prop:"durationPy","min-width":"90px"},{default:l(({row:t})=>[c(_(t.durationPy.toFixed(4)),1)]),_:1}),e(u,{label:"接口耗时",prop:"duration","min-width":"90px"},{default:l(({row:t})=>[c(_(t.duration.toFixed(4)),1)]),_:1}),e(u,{label:"来源渠道",prop:"source","min-width":"100px","show-overflow-tooltip":""}),e(u,{label:"应用场景",prop:"sceneType","min-width":"100px","show-overflow-tooltip":""}),e(u,{label:"创建时间","min-width":"165px"},{default:l(({row:t})=>[c(_(B(O).dateFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})]),_:1}),e(j,{ref_key:"refDialogVideo",ref:a,"max-width":"600px",persistent:""},{title:l(()=>[c(" 视频 ")]),default:l(()=>[i("div",Ve,[i("video",{src:n.url,controls:"",class:"rounded-md max-w-full max-h-full"},null,8,ge)])]),_:1},512),e(he,{ref_key:"createLivePaneRef",ref:y,onSubmit:r},null,512)],64)}}});export{De as default};
